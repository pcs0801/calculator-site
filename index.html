<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>Easy Calculators</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FRYR6M7T0D"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-FRYR6M7T0D');
  </script>
  <meta name="description" content="다크모드, 복사 기능이 가능한 간편한 계산기 웹사이트입니다.">
  <meta name="keywords" content="계산기, 온라인 계산기, calculator, simple calculator, easy calculator">
  <style>
    :root {
      --bg-color: #1e1e1e;
      --text-color: white;
      --btn-operator-color: #0078d7;
      --btn-number-color: #3d3d3d;
      --btn-hover-color: #5a5a5a;
      --calculator-bg: #2d2d2d;
    }

    body.light-mode {
      --bg-color: #f5f5f5;
      --text-color: #000;
      --btn-operator-color: #f39c12;
      --btn-number-color: #e0e0e0;
      --btn-hover-color: #cfcfcf;
      --calculator-bg: #d1d1d1;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 30px;
    }


    .tool-menu {
      width: 200px;
      background-color: #2c2c2c;
      color: #fff;
      padding: 10px;
      overflow-y: auto;
      border: 1px solid #444;
    }

    .light-mode .tool-menu {
      background-color: #f3f3f3;
      color: #000;
      border: 1px solid #ccc;
    }

    .tool-menu img {
      width: 18px;
      height: 18px;
      transition: filter 0.2s;
    }

    body:not(.light-mode) .tool-menu img {
      filter: invert(1);
    }

    .menu-section {
      margin-bottom: 20px;
    }

    .menu-section h4 {
      margin: 0 0 10px;
      color: #777;
    }

    .menu-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.2s;
    }

    .menu-item:hover {
      background: #e0e0e0;
    }

    .menu-item img {
      width: 18px;
      height: 18px;
    }

    .main {
      flex-grow: 1;
      padding: 30px;
      background-color: #1e1e1e;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
    }


    #controls {
      display: flex;
      justify-content: center;
      align-items: center;

    }

    .toggle-label {
      position: absolute;
      top: 4%;
      left: 52%;
      transform: translate(-50%, -50%);
    }

    .toggle-icons {
      display: flex;
      border: 1px solid #ccc;
      border-radius: 20px;
      overflow: hidden;
      width: 80px;
      height: 32px;
      position: absolute;
      top: 5%;
      left: 50.3%;
    }

    .toggle-icons button {
      background-color: transparent;
      border: none;
      width: 50%;
      height: 100%;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;

    }

    .toggle-icons img {
      width: 20px;
      height: 20px;
    }

    .light-mode #lightBtn {
      background-color: #ffffff;
    }

    .light-mode #darkBtn img {
      filter: grayscale(100%);
    }

    body:not(.light-mode) #darkBtn {
      background-color: #3a3a3a;
    }

    body:not(.light-mode) #darkBtn img {
      filter: none;
    }

    body:not(.light-mode) #lightBtn img {
      filter: grayscale(100%);
    }

    .container {
      display: flex;
      gap: 20px;
      margin-top: 10px;
      position: absolute;
      top: 8%;
      left: 40%;
    }

    .calculator {
      background-color: var(--calculator-bg);
      padding: 20px;
      border-radius: 10px;
      width: 360px;
      height: auto;
    }

    .display {
      background-color: var(--bg-color);
      padding: 15px;
      font-size: 32px;
      text-align: right;
      border: none;
      color: var(--text-color);
      width: 100%;
      margin-bottom: 10px;
      border-radius: 5px;
      box-sizing: border-box;
    }

    .buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 4px;
    }

    button {
      padding: 14px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      height: 50px;
      box-sizing: border-box;
    }

    .btn-number {
      background-color: var(--btn-number-color);
      color: var(--text-color);
    }

    .btn-number:hover {
      background-color: var(--btn-hover-color);
    }

    .btn-operator {
      background-color: var(--btn-operator-color);
      color: white;
    }

    .btn-operator:hover {
      filter: brightness(0.9);
    }

    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
      min-width: 200px;
      resize: none;
      overflow: auto;
    }

    .panel-box {
      background-color: var(--calculator-bg);
      border-radius: 10px;
      padding: 15px;
      flex-grow: 1;
      min-height: 200px;
      max-height: 220px;
      overflow-y: auto;
    }

    .panel-box h3 {
      margin-top: 0;
      font-size: 1em;
      margin-bottom: 10px;
    }

    ul {
      list-style: none;
      padding-left: 10px;
      max-height: none;
      overflow: hidden;
      font-size: 0.9em;
    }

    .history-item {
      margin-bottom: 10px;
      cursor: pointer;
    }

    .history-item:hover {
      background-color: var(--btn-hover-color);
      border-radius: 5px;
    }

    .light-mode .history-formula {
      color: #555;
    }

    .history-formula {
      color: #aaa;
    }

    .history-result {
      font-weight: bold;
      font-size: 1.1em;
    }

    .copy-icon {
      position: absolute;
      top: 3%;
      left: -44%;
      font-size: 16px;
      background: transparent;
      border: none;
      cursor: pointer;
      color: var(--text-color);
      opacity: 0.7;
      z-index: 10;
    }

    .copy-icon:hover {
      opacity: 1;
      filter: brightness(1.3);
    }

    body:not(.light-mode) #bmiValueBox {
      color: black;
    }

    .date-calculator {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .discount-keypad button {
      padding: 14px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: var(--btn-number-color);
      color: var(--text-color);
    }

    .discount-keypad button:hover {
      background-color: var(--btn-hover-color);
    }

    .date-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .date-row label {
      flex: 1;
    }

    .date-row input {
      flex: 2;
      padding: 10px;
      border-radius: 5px;
      border: none;
    }

    #languageToggle {
      z-index: 1000;
    }

    .you-save-container {
      text-align: center;
      font-size: 1em;
      margin: 30px 0;
      font-weight: bold;
      color: var(--text-color);
    }

    .you-save-label {
      margin-bottom: 8px;
    }

    .you-save-value {
      background: rgb(255, 245, 158);
      color: black;
      border-radius: 5px;
      padding: 6px 0;
    }

    .discount-btn {
      background-color: var(--btn-number-color);
      color: var(--text-color);
      border-radius: 10px;
      font-size: 18px;
      padding: 14px;
      cursor: pointer;
    }

    .discount-btn:hover {
      background-color: var(--btn-hover-color);
    }
  </style>
</head>

<body class="light-mode">
  <div class="tool-menu">
    <div class="menu-section">
      <h4>Calculator</h4>
      <div class="menu-item" id="standardMenu"><img src="./images/standard-calculator-50.png"
          alt="Standard Calculator Icon" /> Standard
      </div>
      <div class="menu-item"><img src="./images/scientific-calculator-64.png" alt="Scientific Calculator Icon" />
        Scientific (TBU)</div>
    </div>
    <div class="menu-section">
      <h4>Growth</h4>
      <div class="menu-item" id="bmiMenu"><img src="./images/bmi-80.png" alt="BMI Icon" /> BMI</div>
      <div class="menu-item"><img src="./images/birthday-50.png" alt="Age Icon" /> Age (TBU)</div>
      <div class="menu-item" id="dateMenu"><img src="./images/calender-64.png" alt="Date Icon" /> Date</div>
    </div>
    <div class="menu-section">
      <h4>Finance</h4>
      <div class="menu-item" id="discountMenu"><img src="./images/discount-64.png" alt="Discount Icon" /> Discount</div>
      <div class="menu-item"><img src="./images/percentage-50.png" alt="Percentage Icon" /> Percentage (TBU)</div>
      <div class="menu-item"><img src="./images/split-bill-64.png" alt="Split Bill Icon" /> Split Bill (TBU)</div>
    </div>
    <div class="menu-section">
      <h4>Units</h4>
      <div class="menu-item"><img src="./images/angle-64.png" alt="Angle Icon" /> Angle (TBU)</div>
      <div class="menu-item"><img src="./images/volume-50.png" alt="Volume Icon" /> Volume (TBU)</div>
      <div class="menu-item"><img src="./images/temperature-48.png" alt="Temperature Icon" /> Temperature (TBU)</div>
      <div class="menu-item"><img src="./images/speed-48.png" alt="Speed Icon" /> Speed (TBU)</div>
      <div class="menu-item"><img src="./images/time-48.png" alt="Time Icon" /> Time (TBU)</div>
      <div class="menu-item"><img src="./images/mass-48.png" alt="Mass Icon" /> Mass (TBU)</div>
      <div class="menu-item"><img src="./images/energy-50.png" alt="Energy Icon" /> Energy (TBU)</div>
      <div class="menu-item"><img src="./images/pressure-50.png" alt="Pressure Icon" /> Pressure (TBU)</div>
      <div class="menu-item"><img src="./images/frequency-60.png" alt="Frequency Icon" /> Frequency (TBU)</div>
    </div>
    <div class="menu-section">
      <h4>Digital</h4>
      <div class="menu-item"><img src="./images/digital-storage-64.png" alt="Digital Storage Icon" /> Digital Storage
        (TBU)
      </div>
      <div class="menu-item"><img src="./images/numeral-system-60.png" alt="Numeral System Icon" /> Numeral System (TBU)
      </div>
    </div>
  </div>

  <div id="controls">
    <div class="toggle-label">화면 테마 설정</div>
    <div class="toggle-icons">
      <button id="lightBtn" onclick="setTheme('light')">
        <img src="https://img.icons8.com/emoji/48/sun-emoji.png" alt="Sun">
      </button>
      <button id="darkBtn" onclick="setTheme('dark')">
        <img src="https://img.icons8.com/emoji/48/crescent-moon-emoji.png" alt="Moon">
      </button>
    </div>
  </div>


  <div class="container">
    <div class="calculator">
      <input type="text" id="display" class="display" onclick="copyDisplayText()"
        style="user-select: all; cursor: text;" readonly>
      <button onclick="copyDisplayText()" class="copy-icon" title="결과값 복사">📋</button>

      <div class="buttons" id="buttons"></div>
    </div>

    <div class="bmi-calculator" style="display: none; flex-direction: column; gap: 10px;
         background-color: var(--calculator-bg); padding: 20px;
         border-radius: 10px; color: var(--text-color); width: 360px;">
      <h2 style="margin-top: 0;">BMI 계산기</h2>
      <label for="heightInput">신장(cm)</label>
      <input id="heightInput" type="number" placeholder="예: 170"
        style="padding: 10px; border-radius: 5px; border: none;" />

      <label for="weightInput">체중(kg)</label>
      <input id="weightInput" type="number" placeholder="예: 65"
        style="padding: 10px; border-radius: 5px; border: none;" />

      <button onclick="calculateBMI()" class="btn-operator" style="margin-top: 10px;">계산하기</button>

      <div id="bmiResult" style="margin-top: 15px; font-weight: bold;"></div>
      <div id="bmiChart" style="display: none; margin-top: 20px; width: 100%;">
        <div style="text-align: center; font-weight: bold;">
          당신의 BMI지수 <span id="bmiValueBox" style="background:white; padding: 2px 6px; border-radius: 4px;">?</span>
        </div>
        <div style="display: flex; font-size: 0.8em; text-align: center; margin-top: 5px;">
          <div style="flex: 1; background: #7baedc; color: white;">저체중<br>~18.5</div>
          <div style="flex: 1; background: #4a90e2; color: white;">정상<br>18.5~23</div>
          <div style="flex: 1; background: #7b6dd2; color: white;">과체중<br>23~25</div>
          <div style="flex: 1; background: #c88fea; color: white;">비만<br>25~30</div>
          <div style="flex: 1; background: #f15a5a; color: white;">고도비만<br>30~</div>
        </div>
      </div>
    </div>

    <div class="date-calculator"
      style="display: none; background-color: var(--calculator-bg); padding: 20px; border-radius: 10px; color: var(--text-color); width: 360px;">
      <h2 style="text-align: center; margin-top: 0;">📅 날짜 계산기</h2>

      <div class="date-row">
        <label for="fromDate">From</label>
        <input id="fromDate" type="date" />
      </div>

      <div class="date-row">
        <label for="toDate">Today</label>
        <input id="toDate" type="date" />
      </div>

      <button onclick="calculateDateDiff()" class="btn-operator" style="margin-top: 10px; width: 100%;">계산하기</button>

      <div id="dateResult" style="margin-top: 20px; text-align: center; font-weight: bold; font-size: 1.1em;"></div>
    </div>


    <div class="discount-calculator"
      style="display: none; background-color: var(--calculator-bg); padding: 20px; border-radius: 10px; color: var(--text-color); width: 360px;">
      <h2 style="text-align: center; margin-top: 0;">💸 Discount</h2>

      <div style="margin-bottom: 10px;">
        <label>Original price</label>
        <input type="text" id="originalPriceDisplay"
          style="width: 90%; padding: 10px; border-radius: 5px; border: none; background: white; color: black; margin-top: 5px;"
          value="0" />
      </div>

      <div style="margin-bottom: 10px;">
        <label>Discount (% off)</label>
        <input type="text" id="discountPercentDisplay"
          style="width: 90%; padding: 10px; border-radius: 5px; border: none; background: white; color: black; margin-top: 5px;"
          value="0" />
      </div>

      <div style="margin-bottom: 10px;">
        <label>Final price</label>
        <div id="finalPriceDisplay"
          style="width: 90%; background: white; color: black; border-radius: 5px; padding: 10px; margin-top: 5px;">0
        </div>
      </div>

      <div class="you-save-container">
        <div class="you-save-label">You save</div>
        <div id="youSaveDisplay" class="you-save-value">0</div>
      </div>


      <div class="discount-keypad" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
        <button onclick="pressDiscount('7')">7</button>
        <button onclick="pressDiscount('8')">8</button>
        <button onclick="pressDiscount('9')">9</button>
        <button onclick="discountBackspace()">⌫</button>

        <button onclick="pressDiscount('4')">4</button>
        <button onclick="pressDiscount('5')">5</button>
        <button onclick="pressDiscount('6')">6</button>
        <button onclick="clearDiscount()" class="discount-btn">AC</button>

        <button onclick="pressDiscount('1')">1</button>
        <button onclick="pressDiscount('2')">2</button>
        <button onclick="pressDiscount('3')">3</button>
        <div></div>

        <div></div>
        <button onclick="pressDiscount('0')">0</button>
        <button onclick="pressDiscount('.')">.</button>
        <div></div>
        <div></div>
      </div>
    </div>

    <div class="side-panel">
      <div class="panel-box">
        <h3>기록</h3>
        <ul id="historyList"></ul>
      </div>
      <div class="panel-box">
        <h3>메모리</h3>
        <ul id="memoryList"></ul>
      </div>
    </div>
  </div>

  <script>
    const display = document.getElementById("display");
    const historyList = document.getElementById("historyList");
    const memoryList = document.getElementById("memoryList");
    let currentValue = "";
    let memory = 0;

    const symbols = { "×": "*", "÷": "/", "+": "+", "-": "-" };

    function setTheme(mode) {
      document.body.classList.toggle("light-mode", mode === "light");
    }

    function formatNumber(val) {
      if (isNaN(val)) return val;
      const [intPart, decPart] = val.toString().split(".");
      const formatted = intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      return decPart ? formatted + "." + decPart : formatted;
    }

    function updateDisplay(value) {
      currentValue = value.toString().replace(/,/g, "");
      display.value = formatNumber(currentValue);
    }

    function press(val) {
      if (val === "√") updateDisplay(Math.sqrt(parseFloat(currentValue) || 0));
      else if (val === "x²") updateDisplay(Math.pow(parseFloat(currentValue) || 0, 2));
      else if (val === "1/x") updateDisplay(1 / (parseFloat(currentValue) || 1));
      else if (val === "+/-") updateDisplay((parseFloat(currentValue || "0") * -1).toString());
      else {
        currentValue += val;
        updateDisplay(currentValue);
        currentValue = display.value.replace(/,/g, '');
      }
    }

    function calculate() {
      try {
        let expr = currentValue;
        for (const key in symbols) expr = expr.split(key).join(symbols[key]);
        const result = eval(expr);
        const formatted = formatNumber(result);
        const li = document.createElement("li");
        li.className = "history-item";
        li.innerHTML = `<div class="history-formula">${currentValue.replace(/([+\-×÷])/g, " $1 ")} =</div><div class="history-result">${formatted}</div>`;
        li.onclick = () => updateDisplay(result);
        historyList.insertBefore(li, historyList.firstChild);
        updateDisplay(result);
      } catch {
        updateDisplay(langData[currentLang].error);
      }
    }

    function clearAll() { updateDisplay(""); }
    function clearEntry() { updateDisplay(""); }
    function backspace() {
      currentValue = currentValue.trim().slice(0, -1);
      updateDisplay(currentValue);
      updateDisplay(currentValue);
    }
    function memClear() { memory = 0; memoryList.innerHTML = ""; }
    function memRecall() { updateDisplay(currentValue + memory.toString()); }
    function memAdd() { memory += parseFloat(currentValue) || 0; memoryList.innerHTML += `<li>+ ${formatNumber(currentValue)}</li>`; }
    function memSub() { memory -= parseFloat(currentValue) || 0; memoryList.innerHTML += `<li>- ${formatNumber(currentValue)}</li>`; }

    document.addEventListener("keydown", (e) => {
      const key = e.key;
      if (!isNaN(key) || ["+", "-", "*", "/", "."].includes(key)) {
        const symbol = key.replace("*", "×").replace("/", "÷");
        press(symbol);
      } else if (key === "Enter") calculate();
      else if (key === "Backspace") backspace();
      else if (key.toLowerCase() === "c") clearAll();
    });

    const buttonMap = [
      ["MC", "MR", "M+", "M-"],
      ["%", "CE", "C", "⌫"],
      ["1/x", "x²", "√", "÷"],
      ["7", "8", "9", "×"],
      ["4", "5", "6", "-"],
      ["1", "2", "3", "+"],
      ["+/-", "0", ".", "="]
    ];

    const buttonContainer = document.getElementById("buttons");
    buttonMap.forEach(row =>
      row.forEach(text => {
        const btn = document.createElement("button");
        btn.textContent = text;
        btn.className = isNaN(text) && ![".", "+/-", "="].includes(text) ? "btn-operator" : "btn-number";
        if (text === "=") { btn.onclick = calculate; btn.className = "btn-operator"; }
        else if (text === "C") btn.onclick = clearAll;
        else if (text === "CE") btn.onclick = clearEntry;
        else if (text === "⌫") btn.onclick = backspace;
        else if (text === "MC") btn.onclick = memClear;
        else if (text === "MR") btn.onclick = memRecall;
        else if (text === "M+") btn.onclick = memAdd;
        else if (text === "M-") btn.onclick = memSub;
        else btn.onclick = () => press(text);
        buttonContainer.appendChild(btn);
      })
    );

    function copyDisplayText() {
      navigator.clipboard.writeText(display.value).then(() => {
        console.log("Copied to clipboard");
      }).catch(err => {
        console.error("Copy failed", err);
      });
    }


    document.querySelector(".display").addEventListener("copy", function (e) {
      e.clipboardData.setData("text/plain", display.value);
      e.preventDefault();
    });


    let currentLang = 'ko';
    const langData = {
      ko: {
        record: '기록',
        memory: '메모리',
        theme: '화면 테마 설정',
        error: '오류',
        buttons: {
          "결과값 복사": "결과값 복사",
        }
      },
      en: {
        record: 'History',
        memory: 'Memory',
        theme: 'Theme Mode',
        error: 'Error',
        buttons: {
          "결과값 복사": "Copy Result"
        }
      }
    };

    function toggleLanguage() {
      currentLang = currentLang === 'ko' ? 'en' : 'ko';
      document.getElementById('langText').innerText = currentLang === 'ko' ? 'KO' : 'EN';
      document.querySelector('.panel-box h3').innerText = langData[currentLang].record;
      document.querySelectorAll('.panel-box h3')[1].innerText = langData[currentLang].memory;
      document.querySelector('.toggle-label').innerText = langData[currentLang].theme;

      document.querySelectorAll('button').forEach(btn => {
        const label = btn.innerText.trim();
        for (const [ko, en] of Object.entries(langData.ko.buttons)) {
          if (label === ko || label === langData.en.buttons[ko]) {
            btn.innerText = langData[currentLang].buttons[ko];
          }
        }
      });
    }
    document.getElementById("bmiMenu").addEventListener("click", () => {
      document.querySelector(".calculator").style.display = "none";
      document.querySelector(".bmi-calculator").style.display = "flex";
      document.querySelector(".side-panel").style.display = "none";
      document.querySelector(".date-calculator").style.display = "none";
      document.querySelector(".discount-calculator").style.display = "none";

      const container = document.querySelector(".container");
      container.style.flexDirection = "column";
      container.style.alignItems = "center";
    });

    document.getElementById("standardMenu").addEventListener("click", () => {
      document.querySelector(".calculator").style.display = "block";
      document.querySelector(".bmi-calculator").style.display = "none";
      document.querySelector(".date-calculator").style.display = "none";
      document.querySelector(".side-panel").style.display = "flex";
      document.querySelector(".discount-calculator").style.display = "none";

      const container = document.querySelector(".container");
      container.style.flexDirection = "row";
      container.style.alignItems = "flex-start";
      container.style.justifyContent = "flex-start";

      const bmiChart = document.getElementById("bmiChart");
      if (bmiChart) {
        bmiChart.style.display = "none";
      }
    });

    document.getElementById("dateMenu").addEventListener("click", () => {
      document.querySelector(".calculator").style.display = "none";
      document.querySelector(".bmi-calculator").style.display = "none";
      document.querySelector(".side-panel").style.display = "none";
      document.querySelector(".date-calculator").style.display = "block";
      document.querySelector(".discount-calculator").style.display = "none";

      const container = document.querySelector(".container");
      container.style.flexDirection = "column";
      container.style.alignItems = "center";
    });

    function calculateBMI() {
      const height = parseFloat(document.getElementById("heightInput").value);
      const weight = parseFloat(document.getElementById("weightInput").value);
      const resultDiv = document.getElementById("bmiResult");

      if (!height || !weight || height <= 0 || weight <= 0) {
        resultDiv.textContent = "올바른 값을 입력해주세요.";
        return;
      }

      const bmi = weight / Math.pow(height / 100, 2);
      let status = "";

      if (bmi < 18.5) status = "저체중";
      else if (bmi < 23) status = "정상";
      else if (bmi < 25) status = "과체중";
      else if (bmi < 30) status = "비만";
      else status = "고도비만";

      resultDiv.textContent = `당신의 BMI는 ${bmi.toFixed(1)}이며, ${status}입니다.`;

      const bmiValueBox = document.getElementById("bmiValueBox");
      const bmiChart = document.getElementById("bmiChart");

      if (bmiValueBox && bmiChart) {
        bmiValueBox.textContent = bmi.toFixed(1);
        bmiChart.style.display = "block";
      }
    }

    function calculateDateDiff() {
      const from = new Date(document.getElementById("fromDate").value);
      const to = new Date(document.getElementById("toDate").value);
      const resultDiv = document.getElementById("dateResult");

      if (isNaN(from.getTime()) || isNaN(to.getTime())) {
        resultDiv.textContent = "날짜를 모두 입력하세요.";
        return;
      }

      const diffTime = Math.abs(to - from);
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

      resultDiv.textContent = `총 ${diffDays}일 차이입니다.`;
    }

    let discountInput = "";
    let discountStep = 0;

    function pressDiscount(value) {
      const input = discountStep === 0
        ? document.getElementById("originalPriceDisplay")
        : document.getElementById("discountPercentDisplay");

      let raw = input.value.replace(/,/g, "");

      if (value === ".") {
        if (!raw.includes(".")) {
          raw += ".";
        }
      } else {
        if (raw === "0") {
          raw = value;
        } else {
          raw += value;
        }
      }

      input.value = formatWithCommas(raw);
      updateDiscountValues();
    }

    function discountBackspace() {
      if (discountStep === 0) {
        let input = document.getElementById("originalPriceDisplay");
        input.value = input.value.slice(0, -1) || "0";
      } else if (discountStep === 1) {
        let input = document.getElementById("discountPercentDisplay");
        input.value = input.value.slice(0, -1) || "0";
      }

      updateDiscountValues();
    }

    function clearDiscount() {
      discountInput = "";
      discountStep = 0;
      document.getElementById("originalPriceDisplay").value = "0";
      document.getElementById("discountPercentDisplay").value = "0";
      document.getElementById("finalPriceDisplay").innerText = "0";
      document.getElementById("youSaveDisplay").innerText = "0";
    }

    function formatWithCommas(val) {
      if (!val) return "0";
      let [intPart, decPart] = val.split(".");
      intPart = intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      return decPart !== undefined ? `${intPart}.${decPart}` : intPart;
    }

    function updateDiscountValues() {
      const origRaw = document.getElementById("originalPriceDisplay").value.replace(/,/g, "");
      const percentRaw = document.getElementById("discountPercentDisplay").value.replace(/,/g, "");

      const orig = parseFloat(origRaw);
      const percent = parseFloat(percentRaw);

      if (isNaN(orig) || isNaN(percent)) return;

      const discountAmount = (orig * percent) / 100;
      const final = orig - discountAmount;

      document.getElementById("originalPriceDisplay").value =
        isNaN(orig) ? "" : formatWithCommas(origRaw);

      document.getElementById("discountPercentDisplay").value =
        isNaN(percent) ? "" : formatWithCommas(percentRaw);

      document.getElementById("finalPriceDisplay").innerText =
        final.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });

      document.getElementById("youSaveDisplay").innerText =
        discountAmount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    document.getElementById("discountMenu").addEventListener("click", () => {
      document.querySelector(".calculator").style.display = "none";
      document.querySelector(".bmi-calculator").style.display = "none";
      document.querySelector(".date-calculator").style.display = "none";
      document.querySelector(".discount-calculator").style.display = "block";
      document.querySelector(".side-panel").style.display = "none";

      const container = document.querySelector(".container");
      container.style.flexDirection = "column";
      container.style.alignItems = "center";

      clearDiscount();
      discountStep = 0;

    })

    document.getElementById("originalPriceDisplay").addEventListener("input", () => {
      updateDiscountValues();
    });

    document.getElementById("discountPercentDisplay").addEventListener("input", () => {
      updateDiscountValues();
    });

    function clearIfZero(inputId) {
      const input = document.getElementById(inputId);
      input.addEventListener("focus", () => {
        if (input.value === "0") {
          input.value = "";
        }
      });
    }

    clearIfZero("originalPriceDisplay");
    clearIfZero("discountPercentDisplay");

    function restoreZeroIfEmpty(inputId) {
      const input = document.getElementById(inputId);
      input.addEventListener("blur", () => {
        if (input.value.trim() === "") {
          input.value = "0";
          updateDiscountValues();
        }
      });
    }

    restoreZeroIfEmpty("originalPriceDisplay");
    restoreZeroIfEmpty("discountPercentDisplay");

    document.getElementById("originalPriceDisplay").addEventListener("click", () => {
      discountStep = 0;
    });

    document.getElementById("discountPercentDisplay").addEventListener("click", () => {
      discountStep = 1;
    });
  </script>
</body>

</html>